{{ template "header" . }}

<div class="is-size-7 has-text-grey my-5">
  <span> Updated: {{ ago .page.ModTime }} </span>

  {{ .action }}

  {{ if and .edit (not .READONLY) }}
  <a href="{{.edit}}" title="Ctrl+S">
    <span class="icon"><i class="fa-solid fa-pen"></i></span>
    <span>Edit</span>
  </a>
  {{ end }}
</div>

<div class="view">
  {{.content}}

  {{ .afterView }}
</div>


<script>
 {{ if not .READONLY }}
 document.addEventListener('keydown', e => {
     if ( e.key === 's' && ( e.metaKey || e.ctrlKey ) ) {
         e.preventDefault();
         document.location.pathname = "{{.edit}}";
     }
 });
 {{ end }}

 // This is a hack to display right to left text correctly
 document.querySelectorAll('.content *')
         .forEach( ele => ele.setAttribute("dir", "auto") );
</script>

{{ template "footer" . }}
