{{ template "header" . }}
<script src="/assets/script.js"></script>
<style>
 .CodeMirror {
     height: auto;
 }
</style>

<div class="container is-max-desktop">
  <div class="columns">
    <div class="column">
		  <form method="POST" action="/{{ .action }}" class="form" id="editor">
        {{ .csrf }}
			  <div class="field">
				  <textarea id="content" name="content">{{ .content }}</textarea>
			  </div>
        <button type="submit"
                class="button is-link"
                accesskey="s"
                style="position: fixed; right:1em; bottom:1em;z-index: 10;">
          <span class="icon"><i class="fa-solid fa-floppy-disk"></i></span>
          <span>Save</span>
        </button>
		  </form>
    </div>
  </div>
</div>


<script>
 var form = document.getElementById("editor");
 var content = document.getElementById("content");
 var myCodeMirror = CodeMirror.fromTextArea(content, {
     mode: "gfm",
     autofocus: true,
     spellcheck: true,
     lineWrapping: true,
     viewportMargin: Infinity
 });

 document.addEventListener('keydown', function(event) {
     const e = event || window.event;
     const sCharCode = "S".charCodeAt();

     if ( e.keyCode === sCharCode && (e.ctrlKey || e.metaKey ) ) {
         e.preventDefault();
         form.submit();
     }
 });
</script>
{{ template "footer" . }}
