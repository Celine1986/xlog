{{ template "header" . }}

<style>
 .content p img:only-child{
     display: block;
     margin-right: auto;
     margin-left: auto;
 }
 .content h1, .content h2, .content h3,
 .content h4, .content h5, .content h6 {
     border-bottom: 1px solid #ddd;
     padding-bottom: 0.5em;
 }
 .content audio {
     width: 100%;
 }
 .view>p:first-child img:only-child {
     border-radius: 0.5em;
     object-fit: cover;
     object-position: 0 50%;
     max-height: 20em;
     width: 100%;
     transition: max-height 0.5s;
 }

 .content a[href^="http"]::after{
     display: inline-block;
     content: "\f08e";
     font-weight: 900;
     font-family: "Font Awesome 6 Free";
     font-size: 0.8em;
     margin: 0 0.4em;
 }

 .view    {counter-reset:h1;}
 .view h1 {counter-reset:h2;}
 .view h2 {counter-reset:h3;}
 .view h3 {counter-reset:h4;}
 .view h4 {counter-reset:h5;}
 .view h5 {counter-reset:h6;}
 .view h1, .view h2, .view h3, .view h4, .view h4, .view h5, .view h6 {
     font-size: 1em;
     font-weight: bold;
     margin: 3em 0 2em 0 !important;
 }

 .view h1:before {
     counter-increment:h1;
     content:counter(h1) ". ";
 }
 .view h2:before {
     counter-increment:h2;
     content:counter(h1) "." counter(h2) " ";
 }
 .view h3:before {
     counter-increment:h3;
     content:counter(h1) "." counter(h2) "." counter(h3) " ";
 }
 .view h4:before {
     counter-increment:h4;
     content:counter(h1) "." counter(h2) "." counter(h3)  "." counter(h4) " ";
 }
 .view h5:before {
     counter-increment:h5;
     content:counter(h1) "." counter(h2) "." counter(h3) "." counter(h4) "." counter(h5) " ";
 }
 .view h6:before {
     counter-increment:h6;
     content:counter(h1) "." counter(h2) "." counter(h3) "." counter(h4) "." counter(h5)  "." counter(h6) " ";
 }
</style>

<div class="container content is-max-desktop" dir="auto" style="margin-bottom: 20em;">
  <div class="is-size-7 has-text-grey mb-5 is-pulled-right">
    <span> Updated: {{.updated}} </span>
    {{ .meta }}

    <a href="{{.edit}}" title="Ctrl+S">
      <span class="icon"><i class="fa-solid fa-pen"></i></span>
      <span>Edit</span>
    </a>
  </div>

  {{ template "common/title" .title }}

  <div class="view"> {{.content}} </div>

  {{ .afterView }}
</div>

<script>
 document.addEventListener('keydown', e => {
     if ( e.key === 's' && ( e.metaKey || e.ctrlKey ) ) {
         e.preventDefault();
         document.location.pathname = "{{.edit}}";
     }
 });

 // This is a hack to display right to left text correctly
 document.querySelectorAll('.content *')
         .forEach( ele => ele.setAttribute("dir", "auto") );
</script>

{{ template "footer" . }}
