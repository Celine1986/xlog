{{ template "header" . }}
<style>
 .content p img:only-child{
     display: block;
     margin-right: auto;
     margin-left: auto;
 }
 .content h1, .content h2, .content h3, .content h4, .content h5, .content h6 {
     border-bottom: 1px solid #ddd;
     padding-bottom: 0.5em;
 }
</style>

<div class="container mt-5">
  <div class="columns">
    {{ if .sidebar }}
    <div class="column is-one-fifth">
      {{ .sidebar }}
    </div>
    {{ end }}

    <div class="column">
      <div class="content" dir="auto" style="margin-bottom: 20em;">
        <h1 class="title is-1 has-text-weight-bold is-capitalized">
          {{.title}}
        </h1>

        <p class="is-size-7 has-text-grey">
          <span class="icon"><i class="fa-solid fa-square-pen"></i></span>
          <span> Updated: {{.updated}} </span>
        </p>

        {{.content}}
      </div>
    </div>
  </div>
</div>

{{ if .tools }}
<button class="button is-white has-text-grey js-modal-trigger" data-target="modal-js" style="position: fixed; bottom: 1em; right: 1em;">
  Tools: Ctrl+K
</button>

<div id="modal-js" class="modal" tabindex="0">
  <div class="modal-background"></div>

  <div class="modal-content">
    <div class="box">
      <aside class="menu">
        {{ .tools }}
      </aside>
    </div>
  </div>

  <button class="modal-close is-large" aria-label="close"></button>
</div>

<script>
 (function() {
     // Functions to open and close a modal
     function openModal($el) {
         $el.classList.add('is-active');
     }

     function closeModal($el) {
         $el.classList.remove('is-active');
     }

     function closeAllModals() {
         (document.querySelectorAll('.modal') || []).forEach(function($modal) {
             closeModal($modal);
         });
     }

     // Add a click event on buttons to open a specific modal
     (document.querySelectorAll('.js-modal-trigger') || []).forEach(function($trigger) {
         const modal = $trigger.dataset.target;
         const $target = document.getElementById(modal);

         $trigger.addEventListener('click', function() {
             openModal($target);
         });
     });

     // Add a click event on various child elements to close the parent modal
     (document.querySelectorAll('.modal-background, .modal-close, .modal-card-head .delete, .modal-card-foot .button') || []).forEach(function($close) {
         const $target = $close.closest('.modal');

         $close.addEventListener('click', function() {
             closeModal($target);
         });
     });

     // Add a keyboard event to close all modals
     document.addEventListener('keydown', function(event) {
         const e = event || window.event;

         if (e.keyCode === 27) { // Escape key
             closeAllModals();
             return;
         }

         if ( e.keyCode === 75 && e.ctrlKey ) { // K key
             e.preventDefault();
             const $target = document.getElementById('modal-js');
             openModal($target);
             $target.focus();
         } else if ( e.keyCode === 83 && e.ctrlKey ) { // S key
             e.preventDefault();
             document.location.pathname = "{{.edit}}";
         }

     });
 })();

 // This is a hack to display right to left text correctly
 document.querySelectorAll('.content p, .content li, .content h1, .content h2, .content h3, .content h4, .content h5, .content h6').forEach(function(ele) {
     ele.setAttribute("dir", "auto")
 })
</script>
{{ end }}

{{ template "footer" . }}
